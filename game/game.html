<div class="view-game" ng-controller="GameController">

	<div class="col-md-3" ng-switch="game.status">

		<div ng-switch-when="WAITING">
			<div class="alert alert-info" ng-if="! userInfo.joinRef">
				<h4>Une partie vient d'être créée !</h4>
				Vous pouvez la rejoindre !
			</div>
			<div class="alert alert-success" ng-if="userInfo.joinRef">
				<h4>Vous avez rejoint la partie !</h4>
				Le maître du jeu attend les autres joueurs...
			</div>
			<p>
				<button type="button" class="btn btn-primary" ng-hide="userInfo.joinRef" ng-click="joinGame()"><i class="icon-play"></i> Rejoindre</button>
				<button type="button" class="btn btn-danger" ng-hide="! userInfo.joinRef" ng-click="quitGame()"><i class="icon-stop"></i> Quitter</button>
			</p>

			<div class="panel panel-info">
				<div class="panel-heading" ng-pluralize count="countPlayers()" when="{'0': 'Aucun joueur présent', 'one': 'Un joueur présent', 'other': '{} joueurs présents'}"></div>
				<div class="panel-body">
					<div ng-repeat="player in game.players" lg-user="player.user"></div>
				</div>
			</div>

		</div>

		<div ng-switch-when="PREPARING">
			<div class="alert alert-info">
				<h4>Préparation de la partie...</h4>
				Le maître du jeu prépare la partie... Un peu de patience <i class="icon-smiley-smiley"></i>
			</div>
		</div>

		<div ng-switch-when="STOPPED">
			<div class="alert alert-warning">
				<h4>La partie est terminée !</h4>
			</div>
		</div>

		<div ng-switch-when="RUNNING">
			<div ng-if="userInfo.joinRef">
				<div lg-character="me.char"></div>

				<div lg-game-master-ui ng-if="isGameMaster()"></div>

				<div lg-players-poll="" ng-if="iAmAlive() && myTeamIs('L') && game.phase == 'loups'"></div>
				<div class="alert alert-info" ng-if="iAmDead()">
					<h4>Vous êtes mort.</h4>
					C'est terrible ce qui vous est arrivé... Mais un mort ne vote pas, désolé !
				</div>

				<div lg-view-player-identity="" ng-if="game.phase == 'voyante' && iAm('voyante')"></div>
				<div ng-if="game.phase == 'voyante' && ! iAm('voyante')" class="alert alert-info">
					C'est au tour de la voyante... S'il y en a une !
				</div>
			</div>
		</div>
	</div>

	<div class="col-md-9" ng-switch="game.status">


		<!-- Join game -->
		<div ng-switch-when="WAITING">
			<ol class="breadcrumb">
				<li><a href="#/">Accueil</a></li>
				<li>Nouvelle partie</li>
				<li class="active">Attente des joueurs</li>
			</ol>
		</div>

		<!-- Join game -->
		<div ng-switch-when="PREPARING">
			<ol class="breadcrumb">
				<li><a href="#/">Accueil</a></li>
				<li>Nouvelle partie</li>
				<li class="active">Préparation</li>
			</ol>
		</div>


		<div ng-switch-when="RUNNING">
			<ol class="breadcrumb">
				<li><a href="#/">Accueil</a></li>
				<li>Partie en cours</li>
				<li ng-if="isNight()" class="active"><i class="icon-moon"></i> Nuit</li>
				<li ng-if="isDay()" class="active"><i class="icon-sun"></i> Jour</li>
			</ol>
		</div>

		<!-- Chat -->
		<div>
			<ul class="media-list messages" id="messages">
				<li class="media" ng-repeat="msg in availableMessages() | orderBy:'date'" lg-message="msg"></li>
			</ul>
			<form ng-show="myTeamIs('L') || isDay() || iAmDead()" name="form" novalidate="" ng-submit="addMessage()">
				<div class="row">
					<div class="col-lg-12">
						<div class="input-group">
							<input type="text" ng-model="msg" class="form-control" placeholder="Message..."/>
						<span class="input-group-btn">
							<button class="btn btn-primary" ng-disabled="!msg" type="submit">Envoyer</button>
						</span>
						</div>
					</div>
				</div>
			</form>
			<div ng-show="myTeamIs('V') && isNight() && iAmAlive()" class="alert alert-info">
				<h4><i class="icon-moon"></i> C'est la nuit, vous dormez à poings fermés !</h4>
				Espérons que les loups ne jetterons pas leur dévolu sur vous...
			</div>
			<div ng-show="iAmDead()" class="alert alert-info">
				<h4>Vous êtes mort !</h4>
				Seuls les morts peuvent lire vos messages.
			</div>
		</div>
	</div>

</div>
